{% extends 'baseAdmin.html.twig' %}

{% block body %}
    <div id="animes-add-page">
        <div id="pages-actions">
            <a id="go-back" href="{{ path('admin_animes') }}"><i class="fa-solid fa-arrow-left"></i></a>
        </div>
        <form id="infos-anime" enctype="multipart/form-data" method="POST">
            <ul>
                <li id="thumbnail">
                    <label class="required" for="thumbnail">Miniature: <span>(5Mo Maximum !)</span></label>
                    <input type="file" name="thumbnail" id="thumbnailInput" required accept="image/*" max="5000000"/>
                </li>
                <li>
                    <label class="required" for="title">Titre:</label>
                    <input type="text" name="title" id="title" required />
                </li>
                <li>
                    <label class="required" for="summary">Résumé de l'animé:</label>
                    <textarea required id="summary" name="summary"></textarea>
                </li>
                <li>
                    <label class="required" for="season">Saison:</label>
                    <select name="season" id="season" required>
                        <option value="">Aucune</option>
                        {% for season in seasons %}
                            <option value="{{ season.id }}">{{ season.libelle }}</option>
                        {% endfor %}
                    </select>
                </li>
                <li>
                    <label class="required" for="publishDay">Jour de publication:</label>
                    <select id="publishDay" name="publishDay" required>
                        <option value="">--Veuillez sélectionner un jour</option>
                        <option>Lundi</option>
                        <option>Mardi</option>
                        <option>Mercredi</option>
                        <option>Jeudi</option>
                        <option>Vendredi</option>
                        <option>Samedi</option>
                        <option>Dimanche</option>
                    </select>
                </li>
                <li>
                    <label class="required" for="publishTime">Heure de publication:</label>
                    <input required type="time" id="publishTime" name="publishTime" />
                </li>
                <li>
                    <label class="required" for="publishStart">Date de début de publication:</label>
                    <input type="date" name="publishStart" id="publishStart" required />
                </li>
                <li>
                    <label class="required" for="nbEpisodes">Nombre d'épisodes:</label>
                    <input type="number" name="nbEpisodes" id="nbEpisodes" required />
                </li>
                <li id="submit">
                    <button type="submit">Enregistrer</button>
                </li>
            </ul>
        </form>
    </div>
    <script>
        document.getElementById('thumbnailInput').addEventListener('change', function() {
            var fileSize = this.files[0].size;
            if (fileSize > 5000000) { // 5 Mo en octets
                alert('La taille du fichier doit être inférieure à 5 Mo');
                this.value = ''; // Réinitialise le champ de fichier
            }
        });
    </script>
{% endblock %}